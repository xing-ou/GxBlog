<!doctype html>
<html lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Gx&#39;sBlog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Gx&#39;sBlog Atom Feed"><title data-react-helmet="true">å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension? | Gx&#x27;sBlog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://gouxin.fun/2021/11/02/å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension? | Gx&#x27;sBlog"><meta data-react-helmet="true" name="description" content="HEADer"><meta data-react-helmet="true" property="og:description" content="HEADer"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-11-02T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="Xcode"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://gouxin.fun/2021/11/02/å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension"><link data-react-helmet="true" rel="alternate" href="https://gouxin.fun/2021/11/02/å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://gouxin.fun/2021/11/02/å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.46031542.css">
<link rel="preload" href="/assets/js/runtime~main.1db8ae2f.js" as="script">
<link rel="preload" href="/assets/js/main.9994fa56.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/avator.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/avator.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">æˆ‘çš„Blog</b></a><a class="navbar__item navbar__link" href="/">è¿‘æœŸæ–‡ç« </a><a class="navbar__item navbar__link" href="/archive">æ—¥æœŸå½’æ¡£</a><a class="navbar__item navbar__link" href="/tags">æ‰€æœ‰æ ‡ç­¾</a><a class="navbar__item navbar__link" href="/reading">ä¹¦ç±é˜…è¯»</a><a class="navbar__item navbar__link" href="/aboutme">å…³äºæˆ‘</a></div><div class="navbar__items navbar__items--right"><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">è¿‘æœŸæ–‡ç« </div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/07/SwiftUIä¸“è¾‘-004-Buttonä»¥åŠè·³è½¬">SwiftUIä¸“è¾‘004-Buttonä»¥åŠè·³è½¬</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/06/SwiftUIä¸“è¾‘-003-ä½¿ç”¨Image">SwiftUIä¸“è¾‘003-ä½¿ç”¨Image</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/05/SwiftUIä¸“è¾‘-002-å¤„ç†æ–‡æœ¬">SwiftUIä¸“è¾‘002-å¤„ç†æ–‡æœ¬</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/04/SwiftUIä¸“è¾‘-001-layoutç›¸å…³æ§ä»¶">SwiftUIä¸“è¾‘001-layoutç›¸å…³æ§ä»¶</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/03/ä¸€ä¸ªç®€å•çš„StringKeyChain">ä¸€ä¸ªç®€å•çš„StringKeyChain</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/2021/11/02/å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension">å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension?</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/01/å¦‚ä½•æŸ¥çœ‹ioså’Œipadoså½“å‰ç³»ç»Ÿç‰ˆæœ¬å æ¯”">å¦‚ä½•æŸ¥çœ‹iOSã€iPadOSç³»ç»Ÿç‰ˆæœ¬å æ¯”ï¼Ÿ</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/31/Xcode13çš„Info.plistä¸è§äº†">Xcode13çš„Info.plistä¸è§äº†?</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/30/appstoreæˆªå›¾å°ºå¯¸è§„èŒƒ">appstoreæˆªå›¾å°ºå¯¸è§„èŒƒè®¾ç½®</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/29/æ¨æµç ç‡è®¾ç½®">æ¨æµåˆ†è¾¨ç‡ç ç‡è®¾ç½®</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_nmLu" itemprop="headline">å¦‚ä½•ç”¨XcodeKitç¼–å†™ä¸€ä¸ªXcodeExtension?</h1><div class="blogPostData_3WzT margin-vert--md"><time datetime="2021-11-02T00:00:00.000Z" itemprop="datePublished">2021å¹´11æœˆ2æ—¥</time> Â· <!-- -->é¢„è®¡é˜…è¯»6åˆ†é’Ÿ</div></header><div class="markdown" itemprop="articleBody"><p><img alt="HEADer" src="/assets/images/Header-4b8d90053fa6a3ff9c8fc57f0bc3b009.png">
Xcodeæä¾›äº†XcodeKitï¼Œæ¥å…è®¸æˆ‘ä»¬ç¼–å†™Xcodeçš„æ‰©å±•ã€‚ä½†æ˜¯è¿™ä¸ªExtensionåŠŸèƒ½æœ‰é™ï¼Œåªèƒ½å¤„ç†å½“å‰æ‰“å¼€çš„æ–‡ä»¶çš„æºç ã€‚
æˆ‘ä»¬å¯ä»¥ç”¨æ¥ï¼šæ ¼å¼åŒ–ã€è‡ªåŠ¨ç”Ÿæˆä»£ç ç­‰ã€‚
å¸¸ç”¨çš„Extensionæœ‰XCFormatï¼Œå¯ä»¥æ ¼å¼åŒ–Swiftå’ŒOCä»£ç ï¼Œå¯ä»¥åœ¨AppStoreä¸­ä¸‹è½½ã€‚
æ•´ä½“å¼€å‘æ’ä»¶çš„åŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ä»å¤´æ¼”ç¤ºä¸€ä¸ªç§»é™¤ä¸€è¡Œå¼€å¤´çš„æ•°å­—çš„æ’ä»¶ã€‚</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="åˆ›å»ºxcode-extensionå·¥ç¨‹">åˆ›å»ºXcode Extensionå·¥ç¨‹<a aria-hidden="true" class="hash-link" href="#åˆ›å»ºxcode-extensionå·¥ç¨‹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="åˆ›å»ºä¸€ä¸ªmacoså·¥ç¨‹">åˆ›å»ºä¸€ä¸ªmacOSå·¥ç¨‹<a aria-hidden="true" class="hash-link" href="#åˆ›å»ºä¸€ä¸ªmacoså·¥ç¨‹" title="Direct link to heading">â€‹</a></h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww6clhtzij313a0do0u1.jpg" alt="image-20211129180100344"></p><p>è¿™ä¸ªmacOSå·¥ç¨‹ï¼Œå¯¹åº”ä»App Storeä¸‹è½½å®ŒExtensionåï¼Œåœ¨æ¡Œé¢ä¸Šç”Ÿæˆçš„é‚£ä¸ªAppã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªAppä¸­åšExtensionè®¾ç½®ç›¸å…³çš„ç•Œé¢ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="æ–°å»ºä¸€ä¸ªxcode-source-editor-extention-target">æ–°å»ºä¸€ä¸ªXcode Source Editor Extention Target<a aria-hidden="true" class="hash-link" href="#æ–°å»ºä¸€ä¸ªxcode-source-editor-extention-target" title="Direct link to heading">â€‹</a></h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww6l504ldj313y0cydh7.jpg" alt="æˆªå±2021-11-29 ä¸‹åˆ6.09.11"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="è¿è¡Œextension-target">è¿è¡ŒExtension Target<a aria-hidden="true" class="hash-link" href="#è¿è¡Œextension-target" title="Direct link to heading">â€‹</a></h3><p>ç‚¹å‡»è¿è¡ŒExtension Targetï¼Œé€‰æ‹©Xcodeï¼Œæ­¤æ—¶ä¼šæ‰“å¼€ä¸€ä¸ªç°è‰²çš„Xcodeã€‚</p><p>æ‰“å¼€æˆ‘ä»¬çš„æ’ä»¶çš„macOSå·¥ç¨‹ã€‚</p><p>é€‰æ‹©<code>Editor</code>èœå•ï¼Œåº•éƒ¨å°±å‡ºç°äº†æˆ‘ä»¬çš„è‡ªå®šä¹‰èœå•ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww6wlndiej30tq05ct95.jpg" alt="image-20211129182015367"></p><p>å¦‚æœèœå•æ²¡æœ‰å‡ºç°ï¼Œé‚£ä¹ˆè¯·ä¿®æ”¹ä¸€ä¸‹Extension Targetä¸­XcodeKitçš„é“¾æ¥æ–¹å¼ï¼Œé€‰æ‹©<code>Embed &amp; Sign</code>ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww6xtzyhhj319u0k2gnk.jpg" alt="image-20211129182127182"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="xcode-source-editor-extention">Xcode Source Editor Extention<a aria-hidden="true" class="hash-link" href="#xcode-source-editor-extention" title="Direct link to heading">â€‹</a></h2><p>é»˜è®¤çš„<code>Xcode Source Editor Extention</code>ä¼šä¸ºä½ ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ul><li><code>SourceEditorExtension</code>:  è¿™ä¸ªæ–‡ä»¶å®šä¹‰ä½ å°èœå•ä¸­çš„å†…å®¹å’Œextensionå¯åŠ¨æ—¶çš„å›è°ƒã€‚</li><li><code>SourceEditorCommand</code>: æ˜¯å°èœå•ä¸­çš„å‘½ä»¤å¯¹åº”çš„å®ç°ç±»ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="å°èœå•çš„å®šä¹‰">å°èœå•çš„å®šä¹‰<a aria-hidden="true" class="hash-link" href="#å°èœå•çš„å®šä¹‰" title="Direct link to heading">â€‹</a></h3><p>å°èœå•çš„å®šä¹‰æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>SourceEditorExtension</code>çš„ä»£ç å®šä¹‰ã€‚ä¸€ç§æ˜¯é€šè¿‡<code>Info.plist</code>å®šä¹‰ã€‚ä»£ç å®šä¹‰çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šè¦†ç›–Info.plistä¸­çš„å®šä¹‰ã€‚</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="åœ¨infoplistä¸­å®šä¹‰">åœ¨Info.plistä¸­å®šä¹‰<a aria-hidden="true" class="hash-link" href="#åœ¨infoplistä¸­å®šä¹‰" title="Direct link to heading">â€‹</a></h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww78nx1j2j318i0ceq5g.jpg" alt="image-20211129183151859"></p><p>æ¯ä¸ªå‘½ä»¤å°±æ˜¯å°èœå•ä¸­çš„ä¸€ä¸ªå‘½ä»¤å¯¹åº”ã€‚</p><ul><li>XCSourceEditorCommandClassNameï¼š è¿™ä¸ªå‘½ä»¤å¯¹åº”çš„å®ç°ç±»ã€‚æ ¼å¼æ˜¯moduleName + å®ç°ç±»çš„ç±»åï¼š <code>$(PRODUCT_MODULE_NAME).YourImplClassName</code>ã€‚</li><li>XCSourceEditorCommandIdentifierï¼šä½ çš„è¿™ä¸ªå‘½ä»¤çš„ä¸€ä¸ªå”¯ä¸€idã€‚æ ¼å¼æ˜¯bundleId +ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š <code>$(PRODUCT_BUNDLE_IDENTIFIER).SourceEditorCommand</code></li><li>XCSourceEditorCommandNameï¼šèœå•ä¸­å‡ºç°çš„å‘½ä»¤çš„åå­—</li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="åœ¨sourceeditorextensionä¸­å®šä¹‰å°èœå•">åœ¨SourceEditorExtensionä¸­å®šä¹‰å°èœå•<a aria-hidden="true" class="hash-link" href="#åœ¨sourceeditorextensionä¸­å®šä¹‰å°èœå•" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_K1bP language-swift"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class SourceEditorExtension: NSObject, XCSourceEditorExtension {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func extensionDidFinishLaunching() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // If your extension needs to do any work at launch, implement this optional method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var commandDefinitions: [[XCSourceEditorCommandDefinitionKey: Any]] {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // If your extension needs to return a collection of command definitions that differs from those in its Info.plist, implement this optional property getter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let command: [XCSourceEditorCommandDefinitionKey: Any] = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //æ ¼å¼moduleName.å‘½ä»¤å®ç°ç±»çš„ç±»å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .classNameKey: &quot;GxEditorToolsExtension.SourceEditorCommand&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //æ ¼å¼bundleId.è‡ªå®šä¹‰å­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .identifierKey: &quot;com.haixue.GxXcodeEditorTools.GxEditorToolsExtension.removeLinePrefixNum&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //è‡ªå®šä¹‰åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .nameKey: &quot;æˆ‘çš„å°èœå•&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return [command]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="æ‹·è´codeåˆ°å‰ªåˆ‡æ¿" class="copyButton_Ue-o clean-btn">å¤åˆ¶</button></div></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gww7hohzb6j30ok05gaag.jpg" alt="image-20211129184031347"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="å‘½ä»¤çš„å®ç°">å‘½ä»¤çš„å®ç°<a aria-hidden="true" class="hash-link" href="#å‘½ä»¤çš„å®ç°" title="Direct link to heading">â€‹</a></h3><p>å®ç°ç±»éƒ½éµå¾ª<code>XCSourceEditorCommand</code>åè®®ã€‚</p><p>å½“æˆ‘ä»¬ç‚¹å‡»å°èœå•ï¼Œä¼šé€šè¿‡commandçš„<code>XCSourceEditorCommandClassName</code>æ‰¾åˆ°å¯¹åº”çš„å®ç°ç±»ã€‚è°ƒç”¨å®ç°ç±»çš„<code>func perform(...)</code>æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°æ–°å»ºé¡¹ç›®é»˜è®¤ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªcommandæ¨¡æ¿SourceEditorCommandã€‚</p><div class="codeBlockContainer_K1bP language-swift"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class SourceEditorCommand: NSObject, XCSourceEditorCommand {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func perform(with invocation: XCSourceEditorCommandInvocation, completionHandler: @escaping (Error?) -&gt; Void ) -&gt; Void {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Implement your command here, invoking the completion handler when done. Pass it nil on success, and an NSError on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        completionHandler(nil)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="æ‹·è´codeåˆ°å‰ªåˆ‡æ¿" class="copyButton_Ue-o clean-btn">å¤åˆ¶</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="å®ç°æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤">å®ç°æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤<a aria-hidden="true" class="hash-link" href="#å®ç°æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_K1bP language-swift"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import Foundation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import XcodeKit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RemoveLinePrefixNumCommand: NSObject, XCSourceEditorCommand {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func perform(with invocation: XCSourceEditorCommandInvocation, completionHandler: @escaping (Error?) -&gt; Void ) -&gt; Void {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Implement your command here, invoking the completion handler when done. Pass it nil on success, and an NSError on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let lines = invocation.buffer.lines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let result = lines.map { &quot;\($0)&quot; }.map{ self.removePrefixNum(str: $0) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        invocation.buffer.lines.removeAllObjects()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        invocation.buffer.lines.addObjects(from: result)        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        completionHandler(nil)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    func removePrefixNum(str: String) -&gt; String {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var chars: [Character] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //ç©ºæ ¼å’Œæ•°å­—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let sets: Set&lt;Character&gt; = [&quot; &quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var shouldCheck = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for c in str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if shouldCheck {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if sets.contains(c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    chars.append(&quot; &quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    chars.append(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    shouldCheck = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                chars.append(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return String(chars)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="æ‹·è´codeåˆ°å‰ªåˆ‡æ¿" class="copyButton_Ue-o clean-btn">å¤åˆ¶</button></div></div><div class="codeBlockContainer_K1bP language-objective-c"><div class="codeBlockContent_hGly objective-c"><pre tabindex="0" class="prism-code language-objective-c codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">//å¯ä»¥çœ‹åˆ°invocationæœ‰ç”¨çš„ä¹Ÿåªæœ‰ä¸€ä¸ªBufferå¯¹è±¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@interface XCSourceEditorCommandInvocation : NSObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** The identifier of the command the user invoked. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly, copy) NSString *commandIdentifier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** The buffer of source text on which the command can operate. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly, strong) XCSourceTextBuffer *buffer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (copy) void (^cancellationHandler)(void);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span></code></pre><button type="button" aria-label="æ‹·è´codeåˆ°å‰ªåˆ‡æ¿" class="copyButton_Ue-o clean-btn">å¤åˆ¶</button></div></div><div class="codeBlockContainer_K1bP language-objective-c"><div class="codeBlockContent_hGly objective-c"><pre tabindex="0" class="prism-code language-objective-c codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">///bufferï¼Œåˆåªèƒ½æ“ä½œtabã€linesã€selectionsã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@interface XCSourceTextBuffer : NSObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly, copy) NSString *contentUTI;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly) NSInteger tabWidth;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly) NSInteger indentationWidth;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly) BOOL usesTabsForIndentation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly, strong) NSMutableArray &lt;NSString *&gt; *lines;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (readonly, strong) NSMutableArray &lt;XCSourceTextRange *&gt; *selections;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (copy) NSString *completeBuffer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span></code></pre><button type="button" aria-label="æ‹·è´codeåˆ°å‰ªåˆ‡æ¿" class="copyButton_Ue-o clean-btn">å¤åˆ¶</button></div></div><p>xcodeKitåªèƒ½æ“ä½œæ–‡æœ¬ï¼Œåƒè¯­æ³•è§£æç­‰éƒ½å¾—å€ŸåŠ©åˆ«çš„å·¥å…·æ¥å®ç°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="è°ƒè¯•">è°ƒè¯•<a aria-hidden="true" class="hash-link" href="#è°ƒè¯•" title="Direct link to heading">â€‹</a></h3><p>åœ¨å·¥ç¨‹ä¸­æ‰“ä¸Šæ–­ç‚¹ï¼Œç‚¹å‡»è¿è¡Œã€‚</p><p>åœ¨ç°è‰²xcodeä¸­æ‰“å¼€æˆ‘ä»¬å·¥ç¨‹ï¼Œç‚¹å‡»å°èœå•ã€‚å°±ä¼šè¿›å…¥æˆ‘ä»¬æ–­ç‚¹ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="é›†æˆåˆ°xcodeçš„editorèœå•">é›†æˆåˆ°Xcodeçš„Editorèœå•<a aria-hidden="true" class="hash-link" href="#é›†æˆåˆ°xcodeçš„editorèœå•" title="Direct link to heading">â€‹</a></h3><p>è¿›å…¥<strong>ç³»ç»Ÿåå¥½è®¾ç½®</strong>--<strong>æ‰©å±•</strong>ï¼Œé€‰ä¸­æˆ‘ä»¬çš„æ’ä»¶é’©ä¸Šå³å¯</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gwwg9umm74j30xw0oc0uo.jpg" alt="image-20211129234423601"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="åˆ¶ä½œå®‰è£…åŒ…">åˆ¶ä½œå®‰è£…åŒ…<a aria-hidden="true" class="hash-link" href="#åˆ¶ä½œå®‰è£…åŒ…" title="Direct link to heading">â€‹</a></h3><p><code>archive</code> ï¼Œç„¶åé€‰æ‹©copy appï¼Œå¾—åˆ°ä¸€ä¸ª.app</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwwghg4w4tj311q0lydgo.jpg" alt="image-20211129235140936"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwwgj43el5j30t20jsac5.jpg" alt="image-20211129235317200"></p><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†.appå’Œåº”ç”¨ç¨‹åºçš„æå‡æ–‡ä»¶ä¸€èµ·æ”¾å…¥ï¼Œé‡å‘½åæå‡æ–‡ä»¶ä¸ºApplicationã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwwgkqyjeaj30f405s3yh.jpg" alt="image-20211129235452152"></p><p>æ‰“å¼€ç£ç›˜å·¥å…·</p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwwglezhl6j30li0ti75q.jpg" alt="image-20211129235529816"></p><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwwglrcau8j30v4084ab6.jpg" alt="image-20211129235549564"></p><p>é€‰æ‹©åˆšåˆšçš„æ–‡ä»¶å¤¹ï¼Œå°±åˆ¶ä½œæˆäº†dmgã€‚</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3bEF"><div class="col"><b>æ ‡ç­¾</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/xcode">Xcode</a></li></ul></div><section></section></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2021/11/03/ä¸€ä¸ªç®€å•çš„StringKeyChain"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Â« <!-- -->ä¸€ä¸ªç®€å•çš„StringKeyChain</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2021/11/01/å¦‚ä½•æŸ¥çœ‹ioså’Œipadoså½“å‰ç³»ç»Ÿç‰ˆæœ¬å æ¯”"><div class="pagination-nav__sublabel">ä¸‹ä¸€ç¯‡</div><div class="pagination-nav__label">å¦‚ä½•æŸ¥çœ‹iOSã€iPadOSç³»ç»Ÿç‰ˆæœ¬å æ¯”ï¼Ÿ<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åˆ›å»ºxcode-extensionå·¥ç¨‹" class="table-of-contents__link toc-highlight">åˆ›å»ºXcode Extensionå·¥ç¨‹</a><ul><li><a href="#åˆ›å»ºä¸€ä¸ªmacoså·¥ç¨‹" class="table-of-contents__link toc-highlight">åˆ›å»ºä¸€ä¸ªmacOSå·¥ç¨‹</a></li><li><a href="#æ–°å»ºä¸€ä¸ªxcode-source-editor-extention-target" class="table-of-contents__link toc-highlight">æ–°å»ºä¸€ä¸ªXcode Source Editor Extention Target</a></li><li><a href="#è¿è¡Œextension-target" class="table-of-contents__link toc-highlight">è¿è¡ŒExtension Target</a></li></ul></li><li><a href="#xcode-source-editor-extention" class="table-of-contents__link toc-highlight">Xcode Source Editor Extention</a><ul><li><a href="#å°èœå•çš„å®šä¹‰" class="table-of-contents__link toc-highlight">å°èœå•çš„å®šä¹‰</a></li><li><a href="#å‘½ä»¤çš„å®ç°" class="table-of-contents__link toc-highlight">å‘½ä»¤çš„å®ç°</a></li><li><a href="#å®ç°æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤" class="table-of-contents__link toc-highlight">å®ç°æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤</a></li><li><a href="#è°ƒè¯•" class="table-of-contents__link toc-highlight">è°ƒè¯•</a></li><li><a href="#é›†æˆåˆ°xcodeçš„editorèœå•" class="table-of-contents__link toc-highlight">é›†æˆåˆ°Xcodeçš„Editorèœå•</a></li><li><a href="#åˆ¶ä½œå®‰è£…åŒ…" class="table-of-contents__link toc-highlight">åˆ¶ä½œå®‰è£…åŒ…</a></li></ul></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.1db8ae2f.js"></script>
<script src="/assets/js/main.9994fa56.js"></script>
</body>
</html>
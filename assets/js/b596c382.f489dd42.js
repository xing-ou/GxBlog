"use strict";(self.webpackChunkgx_blog=self.webpackChunkgx_blog||[]).push([[8774],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return p}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),p=a,f=u["".concat(l,".").concat(p)]||u[p]||m[p]||o;return n?i.createElement(f,r(r({ref:t},d),{},{components:n})):i.createElement(f,r({ref:t},d))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},40:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var i=n(3117),a=n(102),o=(n(7294),n(3905)),r=["components"],s={title:"8\u3001\u521b\u5efa\u4e00\u4e2ahero transition",tags:["swiftUI"]},l=void 0,c={unversionedId:"swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u521b\u5efa\u4e00\u4e2aherotransition",id:"swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u521b\u5efa\u4e00\u4e2aherotransition",title:"8\u3001\u521b\u5efa\u4e00\u4e2ahero transition",description:"\u4ec0\u4e48\u662fhero transition\uff1f\u8fd8\u8bb0\u5f97\u6211\u4eec\u7684\u5546\u54c1\u5217\u8868\u6709\u4e2a\u56fe\u7247\uff0c\u70b9\u51fb\u56fe\u7247\uff0c\u7136\u540e\u56fe\u7247\u6162\u6162\u53d8\u5927\uff0c\u6210\u4e3a\u65b0\u754c\u9762\u9876\u90e8\u7684header\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u4e3ahero transition\u3002\u6bd4\u5982\uff1aappstroe\u4e2d\u5c31\u5f88\u5e38\u89c1\u3002",source:"@site/docs/swiftUI-cookbook/08-\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/08-\u521b\u5efa\u4e00\u4e2aherotransition.md",sourceDirName:"swiftUI-cookbook/08-\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b",slug:"/swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u521b\u5efa\u4e00\u4e2aherotransition",permalink:"/docs/swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u521b\u5efa\u4e00\u4e2aherotransition",editUrl:"https://github.com/xing-ou/GxBlog/docs/swiftUI-cookbook/08-\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/08-\u521b\u5efa\u4e00\u4e2aherotransition.md",tags:[{label:"swiftUI",permalink:"/docs/tags/swift-ui"}],version:"current",sidebarPosition:8,frontMatter:{title:"8\u3001\u521b\u5efa\u4e00\u4e2ahero transition",tags:["swiftUI"]},sidebar:"swiftUI-cookbook",previous:{title:"7\u3001\u81ea\u5b9a\u4e49view transitions",permalink:"/docs/swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u81ea\u5b9a\u4e49View-Transition"},next:{title:"9\u3001\u4f7f\u7528Lottie\u52a8\u753b",permalink:"/docs/swiftUI-cookbook/\u7b2c\u516b\u7ae0-SwiftUI\u7684\u52a8\u753b/\u4f7f\u7528Lottie\u52a8\u753b"}},d=[{value:"Getting ready",id:"getting-ready",children:[],level:2},{value:"How to do it\u2026",id:"how-to-do-it",children:[],level:2},{value:"How it works\u2026",id:"how-it-works",children:[],level:2}],m={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u4ec0\u4e48\u662fhero transition\uff1f\u8fd8\u8bb0\u5f97\u6211\u4eec\u7684\u5546\u54c1\u5217\u8868\u6709\u4e2a\u56fe\u7247\uff0c\u70b9\u51fb\u56fe\u7247\uff0c\u7136\u540e\u56fe\u7247\u6162\u6162\u53d8\u5927\uff0c\u6210\u4e3a\u65b0\u754c\u9762\u9876\u90e8\u7684header\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u4e3ahero transition\u3002\u6bd4\u5982\uff1aappstroe\u4e2d\u5c31\u5f88\u5e38\u89c1\u3002"),(0,o.kt)("h2",{id:"getting-ready"},"Getting ready"),(0,o.kt)("p",null,"\u9996\u5148\uff0c\u65b0\u5efa\u4e00\u4e2a\u9879\u76ee\uff1a",(0,o.kt)("strong",{parentName:"p"},"HeroViewTransition")),(0,o.kt)("p",null,"\u51c6\u59077\u5f20\u56fe\u7247\uff0c\u52a0\u5165\u9879\u76ee\u4e2d\u3002"),(0,o.kt)("h2",{id:"how-to-do-it"},"How to do it\u2026"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u9996\u5148\u521b\u5efa\u4e00\u4e2aItem\u6765\u4ee3\u8868\u5217\u8868\u4e2d\u7684\u6570\u636e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},"struct Item: Identifiable {\n    let id = UUID()\n    let image : String\n    let title : String\n    let details : String\n}\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"\u51c6\u5907\u5217\u8868\u7684\u6570\u636e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},'let data = [\n    Item(image: "california", title: "California", details: "California, the most populous state in the United States and the third most extensive by area, is located on the western coast of the USA and is bordered by Oregon to the north, Nevada, to the east and northeast, Arizona to the southeast and it shares an international border with the Mexican state of Baja California to the south."),\n    Item(image: "miami", title: "Miami", details: "Miami is an international city at Florida\u2019s south-eastern tip. Its Cuban influence is reflected in the cafes and cigar shops that line Calle Ocho in Little Havana. On barrier islands across the turquoise waters of Biscayne Bay is Miami Beach, home to South Beach. This glamorous neighbourhood is famed for its colourful art deco buildings, white sand, surfside hotels and trendsetting nightclubs."),\n    Item(image: "las-vegas", title: "Las Vegas", details: "Las Vegas, is a resort city famed for its vibrant nightlife, centered around 24-hour casinos and other entertainment options. Its main street and focal point is the Strip, just over 4 miles long.Nevada is a western U.S. state defined by its great expanses of desert, and by the 24-hour casinos and entertainment for which its largest city, Las Vegas, in Nevada\u2019s Mojave Desert."),\n    Item(image: "paris", title: "Paris", details: "Paris is the capital and most-populous city of France. Situated on the Seine River, in the north of the country, it is in the centre of the \xcele-de-France region, also known as the r\xe9gion parisienne. Paris has an area of 105.4 square kilometres and with a population of 2,273,305 people within its city limits is the most populous urban area in the European Union."),\n    Item(image: "dublin", title: "Dublin", details: "Dublin, capital of the Republic of Ireland, is on Ireland\u2019s east coast at the mouth of the River Liffey. Its medieval buildings include 13th-century Dublin Castle and imposing St. Patrick\u2019s Cathedral, founded in 1191. Temple Bar is a riverside nightlife and cultural quarter, home to the Irish Film Institute. Bustling, largely pedestrianised Grafton Street is the city\u2019s principal shopping area, also famed for its buskers."),\n    Item(image: "bali", title: "Bali", details: "Bali \u201cthe world\u2019s best island resort\u201d with its enchanting culture, beaches, dynamic dances and music, with grand mountain views, green rainforests to trek through, rolling waves to surf and deep blue pristine seas to dive in where one can swim with dugongs, dolphins and large mantarays. Covering less than 6,000 square kilometers, this lush isle has startling geographical contrasts; verdant rice terraces and sacred, mist-wreathed volcanoes, white-sand beaches and dense tropical rain forest. as well as being home to one of the world\u2019s most vibrant cultures of  dance and music, lavish ceremonies and artistic achievements."),\n    Item(image: "singapore", title: "Singapore", details: "Singapore, an island city-state off southern Malaysia, is a bustling cosmopolitan city that offers a world-class living environment, with a landscape populated by high-rise buildings and gardens, and is a great place to visit for a couple of days if you are travelling to Asia. In circa-1820 Chinatown stands the red-and-gold Buddha\u2019s Tooth Relic Temple, Little India offers colourful souvenirs and Arab Street is lined with fabric shops. Singapore is also known for eclectic street fare, served in hawker centres such as Tiong Bahru and Maxwell Road."),\n]\n')),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"\u51c6\u5907\u6211\u4eec\u7684\u5217\u8868\uff0c\u548c\u8df3\u8f6c\u540e\u7684\u8be6\u60c5\u754c\u9762")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},'struct DestinationListView: View {\n    @Binding var selectedItem: Item!\n    @Binding var showDetail: Bool\n    let animation: Namespace.ID\n    var body: some View {\n        ScrollView(.vertical) {\n            VStack(spacing: 20) {\n                ForEach(data) { item in\n                    Image(item.image)\n                        .resizable()\n                        .aspectRatio(contentMode: .fill)\n                        .cornerRadius(10)\n                        .shadow(radius: 5)\n                        .matchedGeometryEffect(id: item.image, in: animation)\n                        .onTapGesture {\n                            selectedItem = item\n                            withAnimation {\n                                showDetail.toggle()\n                            }\n                        }\n                }\n            }.padding(.all, 20)\n        }\n    }\n}\n\nstruct DestinationDetailView: View {\n    var selectedItem: Item\n    @Binding var showDetail: Bool\n    let animation: Namespace.ID\n    var body: some View {\n        ZStack(alignment: .topTrailing){\n            VStack{\n                Image(selectedItem.image)\n                    .resizable()\n                    .aspectRatio(contentMode: .fit)\n                    .matchedGeometryEffect(id: selectedItem.image, in: animation)\n                Text(selectedItem.title)\n                    .font(.title)\n                Text(selectedItem.details)\n                    .font(.callout)\n                    .padding(.horizontal)\n                Spacer()\n            }.ignoresSafeArea(.all)\n            Button {\n                withAnimation {\n                    showDetail.toggle()\n                }\n            } label: {\n                Image(systemName: "xmark")\n                    .foregroundColor(.white)\n                    .padding()\n                    .background(.black.opacity(0.8))\n                    .clipShape(Circle())\n            }.background(Color.white.ignoresSafeArea(.all))\n    }\n}\n')),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"\u5728ContentView\u4e2d\u6dfb\u52a0List")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},"struct ContentView: View {\n    @State private var selectedItem: Item!\n    @State private var showDetail = false\n    @Namespace var animation\n    var body: some View {\n        ZStack {\n            DestinationListView(selectedItem: $selectedItem, showDetail: $showDetail, animation: animation)\n                .opacity(showDetail ? 0 : 1)\n            if showDetail {\n                DestinationDetailView(selectedItem: selectedItem, showDetail: $showDetail, animation: animation)\n            }\n        }\n    }\n}\n")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://tva1.sinaimg.cn/large/008i3skNgy1gy9t6d7vkug306a0ck45k.gif",alt:"Untitled"})),(0,o.kt)("h2",{id:"how-it-works"},"How it works\u2026"),(0,o.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728",(0,o.kt)("strong",{parentName:"p"},".matchedGeometryEffect"),"\u91cc\u8bbe\u7f6e\u5f00\u59cb\u7ec4\u4ef6\u548c\u7ed3\u675f\u7ec4\u4ef6\uff0c\u7136\u540e SwiftUI \u4f1a\u795e\u5947\u5730\u4e3a\u60a8\u521b\u5efa\u52a8\u753b\u3002"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},".matchedGeometryEffect"),"\u4f1a\u8bbe\u7f6e\u5f00\u59cb\u7ec4\u4ef6\u548c\u7ed3\u675f\u7ec4\u4ef6\u95f4\u7684\u5173\u7cfb\uff0c\u7136\u540eSwiftUI\u53ef\u4ee5\u6839\u636e\u5173\u7cfb\u521b\u5efa\u4ece\u5f00\u59cb\u4f4d\u7f6e\u5230\u7ed3\u675f\u4f4d\u7f6e\u7684\u52a8\u753b\u3002\u4e3a\u4e86\u5b58\u50a8\u8fd9\u79cd\u5173\u7cfb\uff0c",(0,o.kt)("strong",{parentName:"p"},".matchedGeometryEffect"),"\u9700\u8981\u4e00\u4e2a\u6807\u8bc6\u7b26\u548c\u4e00\u4e2a\u4fdd\u5b58\u5173\u7cfb\u7684\u5730\u65b9\u3002\u5728\u6211\u4eec\u7684\u4ee3\u7801\u4e2d\uff0c\u8fd9\u662f\u5728\u4ee5\u4e0b\u884c\u4e2d\u5b8c\u6210\u7684\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},"//\u6211\u4eec\u4ee5image\u4e3a\u6807\u8bc6\u7b26\uff0c\u5b58\u50a8\u5728animation\u4e2d\u3002\n.matchedGeometryEffect(id: item.image, in: animation)\n")),(0,o.kt)("p",null,"SwiftUI\u63d0\u4f9b\u4e86\u4e00\u4e2aproperty warpper:",(0,o.kt)("strong",{parentName:"p"},"@Namespace"),"\u3002\u4ed6\u4f1a\u5c06view\u52a8\u753b\u76f8\u5173\u7684\u4e00\u4e9b\u5c5e\u6027\u5b58\u50a8\u5728\u5168\u5c40\u7684\u67d0\u4e2a\u5730\u65b9\uff0cSwiftUI\u4f7f\u7528\u8fd9\u4e9b\u5c5e\u6027\u6765\u521b\u5efa\u52a8\u753b\uff0c\u7136\u540e\u6e32\u67d3\u3002"),(0,o.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\u5c31\u662f\uff1a\u901a\u8fc7",(0,o.kt)("strong",{parentName:"p"},".matchedGeometryEffect"),"\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5f00\u59cb\u7ec4\u4ef6\u548c\u4e00\u4e2a\u7ed3\u675f\u7ec4\u4ef6\u3002\u7136\u540e\u6211\u4eec\u544a\u8bc9SwiftUI\uff0c\u4ed6\u4eec\u662f\u540c\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7136\u540eSwiftUI\u81ea\u5df1\u4f1a\u786e\u5b9a\u5982\u4f55\u8fdb\u884c\u52a8\u753b\u3002\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\uff0c\u52a8\u753b\u5c31\u5305\u62ec\uff1a"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"y offset\u7684\u6539\u53d8"),(0,o.kt)("li",{parentName:"ul"},"size\u7684\u6539\u53d8"),(0,o.kt)("li",{parentName:"ul"},"\u5706\u89d2\u7684\u6539\u53d8")))}u.isMDXComponent=!0}}]);
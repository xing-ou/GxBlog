---
title: 块级元素的横向格式化
description: 我们知道块级元素特点是，前后都换行。下面这个是横向格式化的核心：
date: "2021-07-24"
---
## 块级元素的横向格式化

我们知道块级元素特点是，前后都换行。

下面这个是横向格式化的核心：

> 公式：子块级元素的两个margin + 两个border + 两个padding + content要等于父元素的content。

其中margin , border和padding默认为0， 不能为负数。border不能为百分数。

只有margin-left，margin-right，width能为auto。width默认为auto。

由于可能有多个auto，下面是多个auto的行为：

1. 0个auto： 一个auto都没有，且7个值相加不满足上面公式。这个时候就是`过约束`了。此时, margin-right会被强制设为auto。
2. 1个auto:  按照上面公式计算出auto的值。
3. 2个auto:  两个margin为auto，此时两个margin等分剩余空间（如果没有剩余空间了，感觉margin-left会为0， margin-right为auto）。如果某个margin和width一起为auto，那么margin将为0,width为auto。
4. 3个auto: 两个margin和width都是auto。那么两个margin将被设置为0，width为auto。



margin可以设为负数，此时子元素将超出父元素框体。按公式这是没问题的。

块级置换元素会有点特别，那就是如果width为auto，那么他不会自适应，而是设为内容的宽度(比如图片的宽度)。同时图片的高度也会影响宽度。

## 块级元素的纵向格式化

与横向格式化一样，纵向格式化也涉及到7个属性：两个margin, 两个border， 两个padding , content高度。

同样只有margin-top， margin-bottom，height能为auto。

> 正常流模式下，如果margi-top或者margin-bottom为auto，那么他就会直接被设置为0。
>
> 这也解释了为什么，正常流模式下想让元素纵向居中为什么这么困难。



正常流模式下，设置height:auto ，那么框体正好能放得下里面的内容。会有下面两种情况：

1. 如果子代都是块级元素, 那么默认高度是从最上面那个块级子代元素的`上边框外侧`到最下边那么块级子代元素的`下边框外侧`之间的距离
2. 如果块级元素有上内边距或者下内边距，或有上边框 或者下边框，那么其高度是从最上边那个子元素的上外边距的外边界到最下边那个子元素的下外边距的外边界之间的距离。



相邻的纵向外边距会折叠。

## 行内元素

先说下相关术语：

- 匿名文本：不属于任何行内元素的文本
- 字符框：由字体定义，font-size控制字体框的高度。字形可能比字体框高或者矮。
- 内容区：对非置换元素而言，是各字符的字符框连在一起构成的方框， 对于置换元素来说：内容区是自身高度加上内外边距和边框。
- 行距：是line-height 和 font-size之间的差。二者差值除以2，分别添加到内容区上部和下部。内容区这多出来的部分叫做“半行距”。只有非置换元素有行距。
- 行内框：内容区 + 行距得到的方框。对非置换元素而言，高度就是line-height。对置换元素而言，行内框就是内容区，因为没有行距。
- 行框：一行中各个行内框的最高点和最低点的方框。



此外，css还定义了一些行为和有用的概念：

- 内容区相当于块级框的内容框
- 行内元素的背景填充 在 内容区 + padding所在区域
- 行内元素的边框在内容区外的内边距外侧
- 非置换元素的内边距，边框，外边距对行内框的高度没有影响。
- 置换元素的外边距和边框对行内框的高度有影响，进而对行框的高度也有影响
- 行内框在一行中纵向对其的方式由vertical-align决定

下面讲一下，构建行框的具体步骤

1. 确定行内各非置换元素 和 匿名文本的font-size和line-height，计算出行距，除以2，分别添加到字符框的上部和下部。
2. 确定各个置换元素的height, margion-top,margin-bottom , padding-top , padding-bottom, border-top-width,border-bottom-width。相加
3. 确定各内容区在一行的基线上方和下方分别超出多少。这不是件简单的事，你需要确定各元素框，匿名文本的基线在何处，以及一行的基线在何处。然后把他们对其。另外把置换元素的底边和基线对其。
4. 确定设立了vertical-align的元素的纵向偏移有多少。
5. 知道所有行内框的位置后，计算行框的高度。



行内块级元素是当做置换元素进行格式化, 也就是说他的margin, padding, boder会影响方框的高度。

(个人注释：按照书上的描述他是当做置换元素进行格式化，也就是说是底部边框和基线对其，但是实际使用中感觉是行内块级框的基线和基线对其，而不像是底边和基线对其)







